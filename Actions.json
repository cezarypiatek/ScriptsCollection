{
    "$schema": "https://raw.githubusercontent.com/cezarypiatek/ScriptRunnerPOC/main/schema/v1/ScriptRunnerSchema.json",
    "actions": [
        {
            "name": "Run SQL Server Docker Container",
            "description": "Run a Docker container with Microsoft SQL Server",
            "command": "docker run -e ACCEPT_EULA=Y -e MSSQL_SA_PASSWORD={MSSQL_SA_PASSWORD} -e MSSQL_PID={MSSQL_PID} -p {HOST_PORT}:1433 -v {DATA_DIR}:/var/opt/mssql/data --name {CONTAINER_NAME} mcr.microsoft.com/mssql/server:latest",
            "installCommand": "docker pull mcr.microsoft.com/mssql/server:latest",
            "categories": ["docker", "SQL Server"],
            "params": [
                {
                    "name": "MSSQL_PID",
                    "prompt": "dropdown",
                    "description": "Product Edition",
                    "default": "Developer",
                    "promptSettings": {
                        "options": "Developer,Express,Standard,Enterprise"
                    }
                },
                {
                    "name": "HOST_PORT",
                    "prompt": "numeric",
                    "description": "Server port",
                    "default": "1433"
                },
                {
                    "name": "MSSQL_SA_PASSWORD",
                    "prompt": "password",
                    "description": "Password for the SA"
                },
                {
                    "name": "CONTAINER_NAME",
                    "prompt": "text",
                    "description": "Name for the container",
                    "default": "sqlserver"
                },
                {
                    "name": "DATA_DIR",
                    "description": "Data directory",
                    "prompt": "directoryPicker"
                }
            ]
        },
        {
            "name": "RunAzurite",
            "description": "Run a Docker container with Azurite (Azure Storage Emulator)",
            "command": "docker run --rm -p {BlobPort}:10000 -p {QueuePort}:10001 -p {TablePort}:10002 mcr.microsoft.com/azure-storage/azurite",
            "installCommand": "docker pull mcr.microsoft.com/azure-storage/azurite",
            "categories": ["docker", "Azure"],
            "params": [
                {
                    "name": "BlobPort",
                    "prompt": "numeric",
                    "description": "Blob service port",
                    "default": "10000"
                },
                {
                    "name": "QueuePort",
                    "prompt": "numeric",
                    "description": "Queue service port",
                    "default": "10001"
                },
                {
                    "name": "TablePort",
                    "prompt": "numeric",
                    "description": "Table service port",
                    "default": "10002"
                }
            ]
        },
        {
            "name": "DotnetInfo",
            "description": "Show details about installed dotnet",
            "categories": ["dotnet"],
            "command": "dotnet --info"
        },
        {
            "name": "Process using port",
            "description": "Get the process using a specific port, with an option to kill it",
            "categories": ["system"],
            "autoParameterBuilderStyle": "powershell",
            "command": "pwsh -NoProfile -Command ./ProcessUsingPort.ps1",
            "params": [
                {
                    "name": "Port",
                    "prompt": "numeric"
                },
                {
                    "name": "Kill",
                    "prompt": "checkbox"
                }
            ]
        },
        {
            "name": "Get process",
            "description": "Get all processes matching a name pattern",
            "command": "pwsh -Command Get-Process '*{Name}*'",
            "categories": ["system"],
            "params": [
                {
                    "name": "Name",
                    "prompt": "text"
                }
            ]
        },
        {
            "name": "Run DotnetAspire Dashboard",
            "command": "pwsh -NoProfile -Command ./RunAspireDashboard.ps1",
            "autoParameterBuilderStyle": "powershell",
            "categories": ["docker","aspire"],
            "params": [
                {
                    "name": "Distribution",
                    "prompt": "dropdown",
                    "default": "Stable",
                    "promptSettings": {
                        "options": "Stable,Nightly"
                    }
                },
                {
                    "name": "Tag",
                    "prompt": "text",
                    "default": "9.5"
                },
                {
                    "name": "PullLatest",
                    "prompt": "checkbox"
                },
                {
                    "name": "WebPort",
                    "description": "Web Port",
                    "prompt": "numeric",
                    "default": "18888"
                },
                {
                    "name": "OtLPort",
                    "description": "OTL Port",
                    "prompt": "numeric",
                    "default": "4317"
                }
            ]
        },
        {
            "name": "Get container logs",
            "command": "docker logs -f {Container}",
            "categories": ["docker"],
            "params": [
                {
                    "name": "Container",
                    "prompt": "dropdown",
                    "promptSettings": {
                        "searchable": true,
                        "optionsGeneratorCommand": "docker ps --format \"{{.Names}}\""
                    }
                }
            ]
        },
        {
            "name": "CleanUpBuildArtifacts",
            "description": "Cleans up build artifacts from specified directories",
            "command": "pwsh -NoProfile -Command ./CleanBuildFiles.ps1",
            "autoParameterBuilderStyle": "powershell",
            "docs": "CleanBuildFiles.md",
            "categories": ["system","cleanup"],
            "params": [
                {
                    "name": "Path",
                    "prompt": "directoryPicker",
                    "description": "Directory to clean"
                }
            ],
            "interactiveInputs": [
                {
                    "whenMatched": "Delete this directory?",
                    "inputs": [
                        {
                            "label": "Yes",
                            "value": "Y"
                        },
                        {
                            "label": "Yes to All",
                            "value": "A"
                        },
                        {
                            "label": "Skip",
                            "value": "S"
                        },
                        {
                            "label": "Abort",
                            "value": "X"
                        }
                    ]
                }
            ]
        }
    ]
}
